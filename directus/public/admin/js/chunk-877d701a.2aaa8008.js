(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-877d701a"],{3665:function(e,t,n){"use strict";var a=n("5e6b"),i=n.n(a);i.a},"5e6b":function(e,t,n){},8485:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.error||!e.relation?n("div",{staticClass:"translation error"},[n("p",[n("v-icon",{attrs:{name:"warning"}}),e._v("\n    "+e._s(e.$t("interfaces-translation-translation_not_setup"))+"\n  ")],1)]):e.languages&&0!==e.languages.length?e.activeLanguage?n("div",{staticClass:"translation"},[n("v-simple-select",{staticClass:"language-select",attrs:{placeholder:e.$t("interfaces-translation-choose_language")},model:{value:e.activeLanguage,callback:function(t){e.activeLanguage=t},expression:"activeLanguage"}},e._l(e.languages,function(t){return n("option",{key:t.code,domProps:{value:t.code}},[e._v("\n      "+e._s(t.name)+"\n    ")])}),0),n("hr"),n("v-form",{key:e.activeLanguage,ref:"form",staticClass:"form",attrs:{fields:e.relatedFields,values:e.langValue,collection:e.relation.collection_many.collection,"new-item":e.isNew},on:{"stage-value":e.stageValue}})],1):e._e():n("div",{staticClass:"translation error"},[n("p",[n("v-icon",{attrs:{name:"warning"}}),e._v("\n    "+e._s(e.$t("interfaces-translation-translation_no_languages"))+"\n  ")],1)])},i=[],l=(n("8e6e"),n("456d"),n("bd86")),r=n("75fc"),s=(n("ac6a"),n("7514"),n("8db2")),o=n.n(s);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(n,!0).forEach(function(t){Object(l["a"])(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var g={mixins:[o.a],data:function(){return{activeLanguage:null,languages:null}},computed:{error:function(){return!this.options.languagesCollection||!this.options.translationLanguageField},primaryKeyField:function(){return _.find(this.fields,{primary_key:!0}).field},primaryKey:function(){return this.values[this.primaryKeyField]},relatedFields:function(){return this.relation?this.relation.collection_many.fields:null},languageFields:function(){return this.options.languagesCollection?this.$store.state.collections[this.options.languagesCollection].fields:null},langValue:function(){return this.languages&&this.activeLanguage&&this.value&&this.valuesByLang[this.activeLanguage]||{}},isNew:function(){return void 0!==this.valuesByLang[this.activeLanguage]},valuesByLang:function(){if(!this.value)return{};var e=this.options.translationLanguageField,t=this.options.languagesPrimaryKeyField;return _(this.value).map(function(n){return n[e]=n[e][t]||n[e],n}).keyBy(this.options.translationLanguageField).value()},fieldManyName:function(){return this.relation.field_many.field}},created:function(){this.fetchLanguages()},methods:{fetchLanguages:function(){var e=this;if(!this.options.languagesCollection||!this.options.translationLanguageField)return null;this.$api.getItems(this.options.languagesCollection,{limit:-1}).then(function(e){return e.data}).then(function(t){if(0!==t.length){var n=e.options.languagesPrimaryKeyField,a=e.options.languagesNameField;e.languages=t.map(function(e){return{code:e[n],name:e[a]}}),e.activeLanguage=e.options.defaultLanguage||t[0][_.find(e.languageFields,{primary_key:!0}).field]}})},stageValue:function(e){var t,n,a,i=this,s=e.field,o=e.value;this.valuesByLang[this.activeLanguage]?t=this.value.map(function(e){var t=e[i.options.translationLanguageField];return t===i.activeLanguage||t[i.options.languagesPrimaryKeyField]===i.activeLanguage?c({},e,Object(l["a"])({},s,o)):e}):t=this.newItem?[].concat(Object(r["a"])(this.value||[]),[(n={},Object(l["a"])(n,this.options.translationLanguageField,this.activeLanguage),Object(l["a"])(n,s,o),n)]):[].concat(Object(r["a"])(this.value||[]),[(a={},Object(l["a"])(a,this.relation.field_many.field,this.primaryKey),Object(l["a"])(a,this.options.translationLanguageField,this.activeLanguage),Object(l["a"])(a,s,o),a)]);return t=t.map(function(e){var t=Object.assign({},e);return delete t[i.fieldManyName],t}),this.$emit("input",t)}}},f=g,d=(n("3665"),n("2877")),p=Object(d["a"])(f,a,i,!1,null,"1147c387",null);t["default"]=p.exports},"8db2":function(e,t){e.exports={props:{id:{type:String,required:!0},name:{type:String,required:!0},value:{type:null,default:null},type:{type:String,required:!0},length:{type:[String,Number],default:null},readonly:{type:Boolean,default:!1},collection:{type:String,default:null},required:{type:Boolean,default:!1},options:{type:Object,default:()=>({})},newItem:{type:Boolean,default:!1},relation:{type:Object,default:null},fields:{type:Object,default:null},values:{type:Object,default:null}}}}}]);
//# sourceMappingURL=chunk-877d701a.2aaa8008.js.map